#version 450 core

layout (local_size_x = 1024) in;

/*** HEADER ***/

void main() {

	uint pid = gl_GlobalInvocationID.x;
	uint N = points.length();
	if (pid > N) {
		return;
	}

    // update volume
    points[pid].vol = determinant(points[pid].Fe * points[pid].Fp) * points[pid].vol;

    // set the deformation gradients to identity
	points[pid].Fe = mat2(1.0);
    points[pid].Fp = mat2(1.0);
}